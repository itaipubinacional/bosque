<ion-view view-title="Geocab">

  <ion-content scroll="false">
    <!--<button class="button button-icon icon ion-navicon drawer-button" ng-click="toggleLeftSideMenu()"></button>-->
    <div id="map" class="loading" on-hold="onHold($event, data)"></div>
  </ion-content>

  <div ng-if="currentEntity.latitude && !currentEntity.id" ng-click="viewMarker()" ng-include="'./views/templates/new-marker-preview.html'">
  </div>

  <div ng-if="currentEntity.id" ng-click="viewMarker()" ng-include="'./views/templates/marker-preview.html'">
  </div>

  <div ng-if="currentWMS.layer" ng-click="viewWMS()" ng-include="'./views/templates/wms-preview.html'">
  </div>
</ion-view>


<!-- Template de opções do menu de new marker -->
<script id="marker-view-options-menu.html" type="text/ng-template">
  <ion-popover-view>
    <ion-content>
      <ion-list class="options-menu-button">
        <ion-item >
          <button class="button button-icon icon ion-images" ng-if="(selectedPhotoAlbumAttribute.type == 'PHOTO_ALBUM')" ng-click="closePopover();getPhotosByAttribute(selectedPhotoAlbumAttribute);$state.go(MAP_GALLERY);"> 
          {{'map.Photos' | translate}} </button>
        </ion-item>
        <ion-item>
          <button ng-click="approveMarker()" ng-disabled="currentEntity.status == 'ACCEPTED' || !currentEntity.id || userMe.role != 'ADMINISTRATOR'" class="button button-icon icon ion-thumbsup"> 
          {{'map.Approve' | translate}} </button>
        </ion-item>
        <ion-item >
          <button ng-click="refuseMarker()" ng-disabled="currentEntity.status == 'REFUSED' || !currentEntity.id || userMe.role != 'ADMINISTRATOR'" class="button button-icon icon ion-thumbsdown"> 
          {{'map.Refuse' | translate}} </button>
        </ion-item>
        <ion-item>
          <button ng-click="cancelMarker()" ng-disabled="currentEntity.status == 'CANCELED' || !currentEntity.id || userMe.role != 'ADMINISTRATOR'" class="button button-icon icon ion-android-close"> {{'map.Cancel' | translate}} </button>
        </ion-item>
        <ion-item >
          <button ng-click="removeMarker()" ng-disabled="!currentEntity.id || !(currentEntity.user.id == userMe.id && currentEntity.status != 'ACCEPTED')" class="button button-icon icon ion-android-delete"> 
          {{'map.Exclude' | translate}} </button>
        </ion-item>
       </ion-list>
    </ion-content>
  </ion-popover-view>
</script>
