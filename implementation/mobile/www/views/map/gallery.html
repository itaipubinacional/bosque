<ion-view view-title="Gallery">
  <div class="bar bar-header bar-positive">
    <button ng-click="$state.go( INDEX )" class="button button-icon icon ion-android-arrow-back"></button>
    <h1 class="title">Fotos</h1>
    <div class="buttons">
      <button class="button button-icon icon ion-camera" ng-click="getPhoto()"></button>
      <!--<button class="button button-icon icon ion-android-done" ng-click="saveMarker(markerForm)"></button>-->
    </div>
  </div>
  <!--<div class="bar bar-subheader padding">
    <ion-scroll direction="x" style="overflow: scroll; white-space: nowrap;">
      <div class="row">
        <div style="text-align:center" class="col" ng-repeat="attribute in currentEntity.markerAttribute track by $index"
             ng-if="attribute.type == 'PHOTO_ALBUM'" ng-click="getPhotosByAttribute(attribute, $index)">
          <h5>{{ attribute.name }}</h5>
        </div>
      </div>
    </ion-scroll>
  </div>-->
  <ion-content class="has-header" scroll="true" style="margin-top:10px">
    <label class="item item-input item-select" ng-if="photosSelected == 0">
      <span class="input-label">Álbum</span>
      <select ng-change="getPhotosByAttribute(selectedPhotoAlbumAttribute)" ng-model="selectedPhotoAlbumAttribute" ng-options="attribute.name for attribute in currentEntity.markerAttribute | filter:{type: 'PHOTO_ALBUM'}"></select>
    </label>

    <label class="item item-input" ng-if="photosSelected == 1">
      <!--<span class="input-label">Descrição</span>-->
      <input type="text" ng-model="selectedPhoto.description" placeholder="Descrição">
    </label>

    <div class="row" style="flex-wrap: wrap;">
      <div class="col col-50" ng-repeat="photo in selectedPhotoAlbumAttribute.photoAlbum.photos">
        <img style="width:100%" ng-src="{{ setImagePath(photo.image) }}" on-hold="selectPhoto(photo)" ng-click="openModal()"/>
        <!--<h6>{{ photo.description ? photo.description :  photo.name }}</h6>-->
      </div>
    </div>

    <script id="image-modal.html" type="text/ng-template">
      <div class="modal image-modal transparent">
        <div class="bar bar-header transparent">
          <h1>{{editPhoto}}</h1>
          <div class="buttons">
            <button style="color:#fff" class="button button-icon icon ion-android-refresh" ng-if="selectedPhoto.deleted" ng-click="restorePhoto(selectedPhoto)"></button>
            <button style="color:#fff" class="button button-icon icon ion-android-create" ng-if="!selectedPhoto.deleted" ng-click="editPhoto();"></button>
            <button style="color:#fff" class="button button-icon icon ion-android-delete" ng-if="!selectedPhoto.deleted" ng-click="deletePhoto(selectedPhoto)"></button>
          </div>
          <label class="item item-input" ng-if="showEditableDescription">
            <input type="text" ng-model="selectedPhoto.description" placeholder="Descrição">
          </label>
        </div>
        <ion-slide-box on-slide-changed="slideChanged(index)"
                       show-pager="true" ng-click="closeModal()">
          <ion-slide ng-repeat="photo in selectedPhotoAlbumAttribute.photoAlbum.photos">
            <img ng-src="{{ setImagePath(photo.image) }}" class="fullscreen-image" />
            <p class="info">{{ photo.description ? photo.description :  photo.name }}</p>
          </ion-slide>
        </ion-slide-box>
      </div>
    </script>
  </ion-content>
</ion-view>
