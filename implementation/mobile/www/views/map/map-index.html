<ion-view view-title="Map">

  <ion-side-menus>

    <button class="button button-icon icon ion-navicon drawer-button" ng-click="toggleDrawer()"></button>
    <!--<button class="button button-icon icon ion-arrow-shrink fab" ng-click="getGPSPosition()"></button>-->


    <ion-side-menu-content>
      <ion-view title="Ionic App">
        <ion-content scroll="false">
          <openlayers on-hold="onHold($event)" ol-center="center" width="100%" height="100%" ol-defaults="defaults">

            <ol-group ng-repeat="layer in layers | filter:{visible:true}">
              <ol-marker ol-marker-properties="marker" ng-repeat="marker in layer.markers"
                         lat=marker.lat lon=marker.lon>
              </ol-marker>
            </ol-group>
            <!--LAYERS-->

            <ol-marker ol-marker-properties="newMarker" lat=newMarker.lat lon=newMarker.lon></ol-marker>

            <!--<ol-marker ng-repeat="marker in markers" ol-marker-properties="marker" lat="marker.lat"
                       lon="marker.lon"></ol-marker>-->

          </openlayers>
        </ion-content>
      </ion-view>
    </ion-side-menu-content>

    <!-- Left menu -->
    <drawer side="left" on-drag-end="onDragEnd(event)" on-drag-start="onDragStart(event)">
      <div class="list">
        <div>
          <label class="item item-input">
            <i class="icon ion-search placeholder-icon"></i>
            <input type="text" placeholder="Search" ng-model="search">
          </label>
        </div>
        <ion-list ng-repeat="layer in allInternalLayerGroups | filter:search" class="layers">
          <ion-checkbox ng-model="layer.visible" ng-click="toggleLayer(layer)">{{layer.name}}
            <img class="item-checkbox-img" ng-src="{{$API_ENDPOINT}}/{{layer.icon}}">
          </ion-checkbox>
        </ion-list>
        <ion-list>
          <button class="button button-positive" ng-click="logout()">
            Logout
          </button>
        </ion-list>
      </div>
    </drawer>
    <ion-pull-up-footer id="pull-up" ng-if="currentEntity.lat" initial-state="minimized" default-behavior="expand"
                        on-expand="footerExpand()" on-collapse="footerCollapse()" on-minimize="footerMinimize()"
                        ng-include="'./views/map/pull-up.html'">

    </ion-pull-up-footer>
  </ion-side-menus>
</ion-view>
