<ion-view view-title="Map">

  <ion-side-menus>

    <button class="button button-icon icon ion-navicon drawer-button" ng-click="toggleDrawer()"></button>
    <!--<button class="button button-icon icon ion-android-locate gps-button fab" ng-click="getGPSPosition()"></button>-->

    <ion-side-menu-content>
      <ion-content scroll="false">
        <div id="map" on-hold="onHold($event, data)"></div>
      </ion-content>
    </ion-side-menu-content>

    <!-- Left menu -->
    <drawer side="left" on-drag-end="onDragEnd(state)" on-drag-start="onDragStart(state)">
      <div class="list">
        <div>
          <label class="item item-input">
            <i class="icon ion-search placeholder-icon"></i>
            <input type="text" placeholder="{{'Search' | translate}}" ng-model="search">
          </label>
        </div>
        <ion-list ng-repeat="layer in allInternalLayerGroups | filter:search" class="layers">
          <ion-checkbox ng-model="layer.visible" ng-click="toggleLayer(layer)">{{layer.name}}
            <img class="item-checkbox-img" ng-src="{{$API_ENDPOINT}}/{{layer.icon}}">
          </ion-checkbox>
        </ion-list>
      </div>
      <div class="bar bar-footer bar-positive" style="height:75px;">
        <div class="row">
        <div class="col-75">
            <h6 style="word-wrap: initial"><b>{{ userMe.username }}</b></h6>
            <h6 style="word-wrap: initial">{{ userMe.email }}</h6>
          </div>
        </div>
        <div class="col-15" style="margin-top:10px">
          <button class="button button-icon icon ion-android-exit" ng-click="logout()"></button>
        </div>
      </div>
    </drawer>
    <ion-pull-up-footer id="pull-up" ng-if="currentEntity.latitude || currentEntity.id" initial-state="minimized" default-behavior="expand"
                        on-expand="footerExpand()" on-collapse="footerCollapse()" on-minimize="footerMinimize()"
                        ng-include="'./views/map/pull-up.html'">

    </ion-pull-up-footer>
  </ion-side-menus>
</ion-view>
